# Hello Agents 第十三章：实战 - 智能旅行助手（通俗总结）

> **本章核心思想**：之前的章节我们是在"练功"（学技术），这一章我们要"下山"（做项目）了！我们将把 LLM、Agent、MCP、Web 开发等所有技能融会贯通，打造一个真正能用的**智能旅行助手**。

---

## 📖 目录

- [1. 我们要做个什么？](#1-我们要做个什么)
- [2. 架构设计：从后端到前端](#2-架构设计从后端到前端)
- [3. 多智能体天团：分工协作](#3-多智能体天团分工协作)
- [4. MCP 实战：连接高德地图](#4-mcp-实战连接高德地图)
- [5. 功能亮点：预算、地图、导出](#5-功能亮点预算地图导出)
- [6. 本章总结](#6-本章总结)

---

## 1. 我们要做个什么？

传统的旅行规划很痛苦：查攻略、查天气、订酒店、算预算，要在好几个 App 之间切来切去。

我们要做的**智能旅行助手**，一键搞定所有：
*   **输入**："想去北京玩 3 天，喜欢历史，预算中等。"
*   **输出**：一份完整的行程单（含景点、酒店、餐饮、交通）。
*   **可视化**：地图上画出路线。
*   **算账**：自动算出总预算。
*   **可编辑**：不满意可以改。
*   **可带走**：导出 PDF/图片。

---

## 2. 架构设计：从后端到前端

这是一个经典的**前后端分离**项目：

*   **前端 (Frontend)**：Vue3 + TypeScript。负责长得好看，和用户交互。
*   **后端 (Backend)**：Python + FastAPI。负责干活，调度 AI。
*   **大脑 (AI)**：HelloAgents 框架。负责思考和规划。
*   **手脚 (Tools)**：高德地图 MCP、Unsplash 图片 API。负责查数据。

### 🧱 数据模型 (Pydantic)

在代码里，我们不能用乱七八糟的字典，要用严谨的模型：
*   `Location`：经纬度。
*   `Attraction`：景点（含名称、位置、票价）。
*   `DayPlan`：一天的安排。
*   `TripPlan`：整个行程。

---

## 3. 多智能体天团：分工协作

一个人（单 Agent）干所有事太累了，容易出错。我们组建了一个**4 人专家团**：

1.  **🕵️ 景点搜素专家 (AttractionAgent)**：
    *   任务：根据你的喜好（如"历史"）搜景点。
    *   工具：高德地图搜索。

2.  **🌤️ 天气查询专家 (WeatherAgent)**：
    *   任务：查未来几天的天气。
    *   工具：高德天气 API。

3.  **🏨 酒店推荐专家 (HotelAgent)**：
    *   任务：根据预算找酒店。
    *   工具：高德地图搜索。

4.  **📋 行程规划大师 (PlannerAgent)**：
    *   任务：**整合**上面三个人的信息，排出一份合理的行程表，并计算预算。
    *   *这是最聪明的一个，它不查数据，只做决策。*

> **协作流程**：用户下单 -> 景点、天气、酒店 Agent 并行开工 -> 资料汇总给规划大师 -> 大师出方案。

---

## 4. MCP 实战：连接高德地图

我们没有自己写高德地图的 API 适配器，而是直接用了社区现成的 **MCP 服务器**。

```python
# 一行代码连接高德地图
mcp_tool = MCPTool(
    name="amap",
    command="npx",
    args=["-y", "@sugarforever/amap-mcp-server"],
    env={"AMAP_API_KEY": "..."}
)
```

**黑科技**：
*   **自动展开**：这一个 Tool 自动变成了 `maps_search`, `maps_weather` 等十几个工具。
*   **资源共享**：我们只启动了一个 MCP 服务，给 3 个 Agent 共享使用，省资源。

---

## 5. 功能亮点：预算、地图、导出

为了让它像个真正的产品，我们加了很多细节：

### 💰 自动算账
PlannerAgent 在规划时，会顺便把门票、酒店钱算好。前端直接展示一个漂亮的账单。

### 🗺️ 地图可视化
前端用高德地图 JS API，把 Agent 查到的景点经纬度画在地图上，路线一目了然。

### 📤 导出带走
利用 `html2canvas` 和 `jsPDF`，把网页直接生成 PDF。你的旅行计划可以发给朋友了！

---

## 6. 本章总结

### 🌟 核心收获

1.  **全栈落地**：不仅仅是写 Python 脚本，而是做出了一个有前端、有后端的完整 Web App。
2.  **多 Agent 协作**：实践了"专业的人做专业的事"，比单 Agent 效果好得多。
3.  **MCP 的威力**：不写一行 API 代码，直接复用社区能力连接现实世界数据。

### 🚀 下一步是什么？

旅行助手帮我们规划了现实生活。下一章，我们将进入**科研领域**，看看 AI 如何帮我们读论文、写报告，甚至做深度研究！

下一章（第十四章），我们将复现 **DeepResearch（自动化深度研究智能体）**，让 Agent 成为你的超级科研助理！

---

### ��� 快速传送门
- **GitHub 源码**: [hello-agents/chapter13](https://github.com/jjyaoao/helloagents)
- **依赖安装**: `pip install -r requirements.txt`
