# Hello-Agents 第五章通俗总结

> **章节主题**: 基于低代码平台的智能体搭建
> **核心理念**: 从"手写代码"到"搭积木" —— 让人人都能构建AI智能体

---

## 📖 本章概览

第五章教你如何**不写代码或少写代码**就能搭建强大的AI智能体。就像从手写HTML建网站进化到用WordPress一样,现在搭建AI智能体也有了"傻瓜式"的平台工具!

**为什么需要低代码平台?**
- 🎯 **降低门槛**: 产品经理、运营人员也能开发AI应用
- ⚡ **提升效率**: 几小时完成原本需要几天的开发工作
- 👀 **可视化调试**: 能直观看到每一步的运行过程
- 📦 **最佳实践**: 平台内置了行业标准和优化方案

---

## 🛠️ 三大平台对比

本章重点介绍了三个各具特色的低代码平台:

### 1️⃣ Coze (扣子) - 零代码智能体工厂

**一句话定位**: 字节跳动出品,最适合新手的"乐高式"AI搭建平台

#### 核心特点
- ✅ **界面超友好**: 拖拽式操作,像搭积木一样简单
- ✅ **插件超丰富**: 海量现成插件,开箱即用
- ✅ **一键发布**: 直接发布到抖音、飞书、微信等平台
- ❌ **不支持MCP**: 这是目前最大的遗憾
- ❌ **无法导出标准格式**: 只能在扣子内部流转

#### 适用人群
- AI入门用户
- 产品经理、运营人员
- 想快速验证创意的个人开发者

#### 实战案例: 每日AI简报助手

**功能**: 自动抓取36氪、虎嗅、GitHub、arXiv等平台的AI资讯,生成专业简报

**搭建步骤**:
```
第一步: 添加信息源插件
├─ RSS插件 → 订阅36氪、虎嗅等媒体
├─ GitHub插件 → 追踪AI开源项目
└─ arXiv插件 → 获取最新学术论文

第二步: 设计提示词
├─ 系统提示: 定义AI是"资深科技媒体编辑"
└─ 用户提示: 指定输出格式(10条新闻+5篇论文+5个项目)

第三步: 测试并发布
├─ 预览运行效果
├─ 调整提示词优化输出
└─ 一键发布到各平台
```

**生成效果示例**:
```markdown
# AI日报 by@jasonhuang 2025-09-24

## 🚀 AI技术新闻
🤖 智元机器人GO-1通用具身基座大模型全面开源
链接: https://36kr.com/p/3479085489708163
概况: 智元机器人宣布其GO-1通用具身基座大模型全面开源...

## 📚 AI学术论文
🧪 Lyra: Generative 3D Scene Reconstruction...
链接: http://arxiv.org/pdf/2509.19296v1
概况: 提出通过视频扩散模型自蒸馏实现3D场景生成...

## 💻 AI开源项目
🤖 llmling-agent - 多智能体工作流框架
链接: https://github.com/phil65/llmling-agent
概况: 支持YAML配置和编程方式的多智能体交互框架...
```

---

### 2️⃣ Dify - 企业级AI应用开发平台

**一句话定位**: 开源、全能、企业级的专业选手

#### 核心特点
- ✅ **功能全面**: RAG、工作流、模型管理一站式解决
- ✅ **插件丰富**: 8000+插件市场,几乎覆盖所有需求
- ✅ **支持MCP**: 可以集成最新的工具协议
- ✅ **私有部署**: Docker一键启动,数据完全自主可控
- ✅ **企业级安全**: AES-256加密、权限控制、审计日志
- ❌ **学习曲线陡**: 新手需要时间适应
- ❌ **性能瓶颈**: Python实现,高并发场景可能需要优化

#### 适用人群
- 有技术背景的开发者
- 需要构建企业级应用的团队
- 对数据安全有严格要求的公司

#### 实战案例: 超级智能体个人助手

**功能**: 一个助手搞定所有事情 —— 问答、文案、生图、生视频、数据分析、地图导航...

**核心架构**:
```
问题分类器 (路由中枢)
    ├─ 日常助手 → 通用问答
    ├─ 文案助手 → 润色优化
    ├─ 生图助手 → 豆包生成图片
    ├─ 生视频助手 → 豆包生成视频
    ├─ 数据查询助手 → SQL查询+自然语言整理
    ├─ 数据分析助手 → SQL查询+BI可视化图表
    ├─ 高德助手 → 路线规划(MCP集成)
    ├─ 饮食助手 → 美食推荐(MCP集成)
    └─ 新闻助手 → 实时资讯(MCP集成)
```

**亮点功能**:

1. **多智能体架构**
   - 用"问题分类器"智能路由
   - 每个子助手专注一个领域
   - 避免单一模型处理所有任务导致的混乱

2. **MCP工具集成**
   ```
   什么是MCP?
   Model Context Protocol (模型上下文协议)
   - 专为AI智能体设计的工具调用标准
   - 比传统API更智能、更标准化
   - 在魔搭社区可以找到大量现成的MCP服务
   ```

3. **数据库智能查询**
   ```python
   # 提示词提供表结构信息
   员工表(employees): id, name, department, salary, hire_date

   # 用户问: "查询销售部门平均工资"
   # AI自动生成SQL:
   SELECT AVG(salary) FROM employees WHERE department='销售部'

   # 结果再通过大模型转换为自然语言
   ```

**配置要点**:

```markdown
### 文案优化助手提示词结构
# 一、角色人设
你是专业的文案优化专家...

# 二、背景
用户提供了原始文案,需要优化以提升效果...

# 三、任务目标
- 分析并优化结构、语言、风格
- 提升吸引力、可读性、转化率
- 保持核心信息不变

# 四、限制提示
- 不改变原意
- 不添加虚构内容
- 避免过度专业术语

# 五、输出格式
优化后文本须超过500字,结构清晰,内容详实
```

---

### 3️⃣ n8n - 自动化工作流之王

**一句话定位**: 不只是AI平台,更是万能的自动化连接器

#### 核心特点
- ✅ **连接能力强**: 数百个预置节点,连接一切服务
- ✅ **AI集成优雅**: AI Agent节点整合模型+记忆+工具
- ✅ **私有部署简单**: 目前最容易部署的私有化Agent方案
- ✅ **可视化极佳**: 数据流清晰可见,调试直观
- ❌ **内存存储**: 重启即丢失,生产环境需外接数据库
- ❌ **版本控制弱**: 不如代码的Git管理方便
- ❌ **调试略繁琐**: 复杂流程定位问题需逐节点检查

#### 适用人群
- 需要深度业务集成的开发者
- 追求高度定制化自动化的企业
- 重视数据安全的团队

#### 实战案例: 智能邮件助手

**功能**: 自动回复Gmail邮件,能上网搜索、查询知识库、判断工作时间

**核心概念**:
```
节点 (Node) = 功能积木块
  ├─ 触发节点: 启动流程 (如"收到新邮件")
  └─ 常规节点: 处理逻辑 (如"调用AI"、"发送邮件")

工作流 (Workflow) = 节点连接成的自动化流程
  数据以JSON格式在节点间传递
```

**搭建流程**:

```
步骤1: 构建知识库 (只需运行一次)
┌─────────────────────────────────────┐
│ Code节点                             │
│ (存储工作时间等知识)                  │
└────────┬────────────────────────────┘
         ↓
┌─────────────────────────────────────┐
│ Embeddings节点                       │
│ (文本转向量)                          │
└────────┬────────────────────────────┘
         ↓
┌─────────────────────────────────────┐
│ Simple Vector Store                  │
│ (存入内存数据库, Key: my-dailytime)   │
└─────────────────────────────────────┘

步骤2: 创建邮件处理流程
┌─────────────────────────────────────┐
│ Gmail触发器                          │
│ (Event: Message Received)            │
└────────┬────────────────────────────┘
         ↓
┌─────────────────────────────────────┐
│ AI Agent节点 ★核心大脑★              │
│ ├─ Chat Model: Google Gemini        │
│ ├─ Memory: 记住对话历史              │
│ └─ Tools:                            │
│     ├─ SerpAPI (上网搜索)            │
│     └─ Vector Store (查知识库)       │
└────────┬────────────────────────────┘
         ↓
┌─────────────────────────────────────┐
│ Gmail发送节点                        │
│ (自动回复邮件)                       │
└─────────────────────────────────────┘
```

**AI Agent关键提示词**:

```markdown
# System Message (系统指令)
你是全天候AI邮件助手。任务:
1. 使用SerpAPI回答邮件问题
2. 根据工作时间添加状态提醒

# 可用工具
- SerpAPI: 上网搜索答案
- Vector Store: 查询我的工作时间

# 执行步骤
1. 分析邮件问题
2. 并行搜集信息:
   - SerpAPI搜索答案
   - Vector Store获取工作时间
3. 草拟核心回复
4. 添加状态前缀:
   非工作时间 → "您好,已收到邮件。我的工作时间为[查询结果],
                  会在下个工作日回复。以下是初步答复..."
   工作时间 → "您好,关于您的问题,答复如下..."
5. JSON格式输出:
   {
     "shouldReply": true,
     "subject": "Re: 原主题",
     "body": "完整回复(用<br>换行)"
   }
```

**回复效果**:
```
发件: 用户在周日晚上10点发送
主题: 请问LangChain的最新版本是什么?

AI自动回复:
您好,感谢来信。您已在我的非工作时间联系我
(我的工作时间为:周一至周五 9:00-17:00 AEST)。
我会在下个工作日亲自审阅。以下是初步答复:

---

根据最新信息,LangChain当前版本为0.3.x系列,
主要更新包括...
[SerpAPI搜索到的详细答案]
```

---

## 🎯 平台选型指南

**快速决策树**:

```
你的需求是什么?
│
├─ 快速验证想法 + 零技术背景
│  → 选择 Coze
│     适用: 个人创作者、产品经理、运营人员
│
├─ 企业级应用 + 复杂业务逻辑
│  → 选择 Dify
│     适用: 开发团队、需要私有部署的企业
│
└─ 深度业务集成 + 自动化流程
   → 选择 n8n
      适用: 需要连接多个系统的自动化场景
```

**详细对比**:

| 维度 | Coze | Dify | n8n |
|------|------|------|-----|
| **上手难度** | ⭐ 极简单 | ⭐⭐⭐ 中等 | ⭐⭐⭐⭐ 较复杂 |
| **功能丰富度** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **插件生态** | 丰富 | 8000+ | 数百个节点 |
| **MCP支持** | ❌ | ✅ | ✅ |
| **私有部署** | ❌ | ✅ | ✅ |
| **多平台发布** | ✅ 超强 | ⚠️ 一般 | ⚠️ 需自行对接 |
| **适合场景** | C端应用 | B端应用 | 自动化流程 |

---

## 💡 核心知识点

### 1. 什么是MCP协议?

**Model Context Protocol (模型上下文协议)**

```
传统方式:
AI → 调用API → 返回结果
  └─ 每个API接口格式不同,需要单独适配

MCP方式:
AI → MCP协议 → 统一标准调用各种工具
  └─ 所有工具遵循统一规范,即插即用
```

**优势**:
- 📦 **标准化**: 一次开发,处处可用
- 🔌 **即插即用**: 无需为每个AI平台单独适配
- 🌐 **云端部署**: 可使用托管的MCP服务(如魔搭社区)

**配置示例(Dify中使用魔搭MCP)**:
```json
{
  "mcpServers": {
    "amap": {
      "url": "https://modelscope.cn/mcp/amap/sse",
      "transport": "sse",
      "apiKey": "your-api-key"
    }
  }
}
```

### 2. 多智能体 vs 单智能体

**单智能体问题**:
```
用户: "帮我优化这段文案,顺便查一下明天天气"

单智能体:
- 提示词超长 (包含所有功能说明)
- 容易混淆任务
- 输出质量下降
```

**多智能体架构**:
```
问题分类器
  ├─ 识别为"文案优化" → 调用文案助手
  └─ 识别为"天气查询" → 调用天气助手

优势:
✅ 每个智能体提示词简洁专注
✅ 任务边界清晰,不会混淆
✅ 易于维护和扩展
```

### 3. 提示词工程关键技巧

**结构化提示词模板**:
```markdown
# 一、角色人设 (Role)
定义AI的专业身份和能力边界

# 二、背景 (Background)
说明任务的上下文和已知条件

# 三、任务目标 (Task)
明确具体要完成的工作

# 四、限制提示 (Limit)
告诉AI什么不能做,避免越界

# 五、输出格式 (Example)
提供具体的输出示例
```

**实用技巧**:
```
1. 角色定位要具体
   ❌ "你是AI助手"
   ✅ "你是拥有10年经验的资深科技媒体编辑"

2. 任务拆解要清晰
   ❌ "帮我整理数据"
   ✅ "步骤1: 数据去重; 步骤2: 按时间排序; 步骤3: 生成统计图表"

3. 输出格式要严格
   使用JSON Schema或详细示例
   避免模糊描述如"合适的格式"
```

---

## 🔧 实战技巧总结

### Coze开发技巧

1. **插件配置要精准**
   ```
   RSS订阅: 确保RSS链接有效
   GitHub: 设置合理的查询关键词和数量限制
   arXiv: 选择准确的领域关键词
   ```

2. **提示词使用变量**
   ```
   {format_instructions} - 动态插入输出格式说明
   {articles} - 引用上游节点的数据
   ```

3. **测试驱动优化**
   ```
   预览运行 → 检查输出 → 调整提示词 → 再次测试
   重复这个循环直到满意
   ```

### Dify开发技巧

1. **知识库优化**
   ```
   - 使用合适的分块大小(建议500-1000字)
   - 选择匹配的Embedding模型
   - 设置合理的检索数量(Top K)
   ```

2. **工作流调试**
   ```
   - 善用变量面板查看中间结果
   - 使用条件分支处理不同情况
   - 添加日志节点记录关键信息
   ```

3. **数据库查询优化**
   ```
   # 提示词中提供简化的表结构
   不要: 完整DDL语句(太长)
   推荐: 表名+关键字段说明

   示例:
   员工表(employees): id, 姓名(name), 部门(dept)
   ```

### n8n开发技巧

1. **节点连接规则**
   ```
   触发节点 → 只能有一个
   数据流向 → 上游到下游,JSON格式传递
   错误处理 → 使用Error Trigger节点兜底
   ```

2. **表达式语法**
   ```javascript
   // 引用上游节点数据
   {{ $('Gmail').item.json.Subject }}

   // 当前时间
   {{ new Date().toLocaleString() }}

   // 条件判断
   {{ $json.status === 'success' ? 'OK' : 'Failed' }}
   ```

3. **持久化改造**
   ```
   开发阶段:
   - Simple Memory (快速测试)
   - Simple Vector Store (方便调试)

   生产环境:
   - Redis Memory (对话历史持久化)
   - Pinecone/Qdrant (向量数据持久化)
   ```

---

## 📊 真实场景应用

### 场景1: C端创作工具

**需求**: AI写作助手小程序,快速上线

**最佳方案**: Coze
```
理由:
✅ 零代码开发,产品经理可独立完成
✅ 一键发布到微信小程序
✅ 插件市场有现成的文案优化组件
✅ 开发周期: 1-2天

技术架构:
用户输入 → Coze智能体 → 文案优化插件 → 返回结果
```

### 场景2: 企业合同审核系统

**需求**: 处理敏感文档,私有部署,深度集成

**最佳方案**: Dify
```
理由:
✅ 支持本地Docker部署,数据不出内网
✅ 企业级权限控制和审计日志
✅ RAG能力强,可导入大量合同模板
✅ 可通过API与OA系统集成

技术架构:
文档上传 → RAG检索 → 风险条款识别 → 人工审核 → 归档
```

### 场景3: 研发自动化平台

**需求**: 连接Git、JIRA、测试平台等多个系统

**最佳方案**: n8n
```
理由:
✅ 原生支持GitHub、GitLab等开发工具
✅ 可视化流程易于团队理解和维护
✅ 私有部署保障代码安全
✅ 灵活的自定义节点满足特殊需求

技术架构:
代码提交 → 触发CI/CD → 运行测试 →
分析结果 → 更新JIRA → 通知团队 → 生成报告
```

---

## 🚀 进阶学习路径

### 新手入门
```
第1周: Coze基础
- 注册账号,熟悉界面
- 跟着教程做"每日简报"案例
- 尝试自己的第一个智能体

第2周: Dify探索
- 本地Docker部署Dify
- 学习工作流编排
- 实现简单的RAG应用

第3周: n8n实践
- 安装n8n (Docker或npm)
- 完成"邮件助手"案例
- 探索更多自动化场景
```

### 进阶提升
```
提示词工程:
- 学习Few-shot提示
- 掌握Chain of Thought
- 研究角色扮演技巧

工具开发:
- Dify自定义插件开发
- n8n自定义节点开发
- MCP服务开发

架构设计:
- 多智能体协作模式
- 长时记忆设计
- 容错和降级策略
```

---

## 🎓 本章习题精选

### 思考题1: 平台选型

假设要开发一个**内部知识问答系统**:
- 员工数: 500人
- 知识文档: 10000+篇
- 安全要求: 数据不能上云
- 团队: 2名后端工程师

**你会选择哪个平台?为什么?**

<details>
<summary>参考答案</summary>

**推荐: Dify**

理由分析:
1. ✅ 支持私有部署 (满足安全要求)
2. ✅ RAG能力强 (处理大量文档)
3. ✅ 开源免费 (成本可控)
4. ✅ 有技术团队 (可以深度定制)

架构建议:
```
Dify (Docker部署)
  ├─ 知识库: 导入10000+文档
  ├─ Embedding: 使用开源模型(如BGE)
  ├─ LLM: 本地部署(如Qwen)
  └─ 前端: 嵌入内部OA系统
```
</details>

### 实践题2: 提示词优化

以下是一个糟糕的提示词,请优化它:
```
你是AI助手,帮我写东西。
```

<details>
<summary>参考答案</summary>

**优化后**:
```markdown
# 角色
你是一位资深的商务文案撰写专家,拥有10年以上的
企业对外沟通材料创作经验。

# 背景
用户需要撰写一份商务类文档,可能包括但不限于:
商务邮件、提案、报告、宣传材料等。

# 任务目标
1. 理解用户的具体需求和目标受众
2. 采用专业、正式但不失亲和力的语言风格
3. 确保逻辑清晰、结构完整
4. 突出核心信息,避免冗余

# 限制
- 避免使用过于口语化的表达
- 不要添加未经证实的数据
- 保持客观中立,不夸大事实

# 工作流程
1. 首先询问用户: 文档类型、目标受众、核心诉求
2. 根据信息起草初稿
3. 征询用户反馈
4. 根据反馈迭代优化

请问您需要撰写什么类型的商务文档?
```

改进要点:
- ✅ 明确角色定位
- ✅ 细化任务目标
- ✅ 设定行为边界
- ✅ 定义工作流程
</details>

---

## 📚 关键术语表

| 术语 | 解释 | 举例 |
|------|------|------|
| **低代码平台** | 通过可视化界面减少编码的开发平台 | Coze、Dify、n8n |
| **MCP协议** | Model Context Protocol,AI工具调用标准 | 统一的工具接口规范 |
| **RAG** | Retrieval-Augmented Generation,检索增强生成 | 结合知识库的问答 |
| **工作流** | 多个节点连接成的自动化流程 | 邮件接收→AI处理→发送回复 |
| **提示词工程** | 设计和优化AI指令的技术 | 角色+任务+限制+示例 |
| **多智能体** | 多个专业AI协作完成任务的架构 | 文案助手+数据助手+...  |
| **Embedding** | 将文本转换为向量的技术 | 用于语义搜索 |
| **问题分类器** | 路由用户请求到正确处理模块的组件 | Dify的Classifier节点 |

---

## 🔗 学习资源

### 官方文档
- **Coze**: https://www.coze.cn/docs
- **Dify**: https://docs.dify.ai/
- **n8n**: https://docs.n8n.io/

### 社区资源
- **Coze商店**: 海量模板可复制学习
- **Dify Marketplace**: 8000+插件和模板
- **n8n社区**: https://community.n8n.io/

### 进阶学习
- **提示词工程**: https://www.promptingguide.ai/
- **MCP协议**: https://modelcontextprotocol.io/
- **LangChain文档**: https://python.langchain.com/

---

## 💬 总结

第五章的核心思想: **平台化开发不是取代代码,而是提供更高效的选择**

```
什么时候用低代码?
✅ 快速原型验证
✅ 标准化业务流程
✅ 非技术人员参与
✅ 快速迭代需求

什么时候写代码?
✅ 极致性能要求
✅ 复杂定制逻辑
✅ 平台能力不足
✅ 需要细粒度控制
```

**最佳实践: 混合开发**
```
用Coze快速验证想法
  ↓
用Dify构建MVP
  ↓
核心功能用代码重写
  ↓
周边功能继续用平台
```

---

**📖 上一章**: [第四章 - 智能体经典范式构建](./HelloAgents_Chapter4_通俗总结.md)
**📖 下一章**: 第六章 - 更底层的智能体框架

**🎯 实战建议**: 三个平台都动手试一遍,找到最适合自己的工具!